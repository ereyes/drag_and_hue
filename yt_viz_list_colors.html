<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Thumbnail Extractor with Dominant Colors</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.4.0/color-thief.min.js" integrity="sha512-r2yd2GP87iHAsf2K+ARvu01VtR7Bs04la0geDLbFlB/38AruUbA5qfmtXwXx6FZBQGJRogiPtEqtfk/fnQfaYA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .thumbnail {
            margin-top: 20px;
            max-width: 150px;
            display: inline-block;
            margin-right: 10px;
        }
        .color-bar {
            width: 300px;
            height: 30px;
            margin: 5px 0;
            border: 1px solid #000;
        }
        .bar-container {
            display: flex;
            flex-direction: row;
            margin-top: 20px;
        }
        #thumbnailContainer img {
            display: none;
        }
    </style>
</head>
<body>
    <h1>YouTube Thumbnail Extractor with Dominant Colors</h1>
    <p>Paste the YouTube URLs (one per line) to get the thumbnails and their dominant colors:</p>

    <textarea id="youtubeUrls" placeholder="Enter YouTube URLs, one per line" rows="5" cols="50"></textarea>
    <br>
    <button onclick="getThumbnails()">Get Thumbnails and Dominant Colors</button>

    <div id="thumbnailContainer">
        <h3>Thumbnails:</h3>
        <!-- Thumbnails will be hidden but loaded here -->
    </div>

    <div id="colorBarsContainer">
        <h3>Dominant Colors:</h3>
        <!-- Color bars will be displayed here -->
    </div>

    <script>
        function getThumbnails() {
            const urls = document.getElementById('youtubeUrls').value.split('\n');
            const thumbnailContainer = document.getElementById('thumbnailContainer');
            const colorBarsContainer = document.getElementById('colorBarsContainer');
            thumbnailContainer.innerHTML = ''; // Clear previous thumbnails
            colorBarsContainer.innerHTML = ''; // Clear previous color bars

            urls.forEach(url => {
                const videoId = extractVideoId(url.trim());
                if (videoId) {
                    const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
                    const imgElement = document.createElement('img');
                    imgElement.src = thumbnailUrl;
                    imgElement.className = 'thumbnail';
                    imgElement.crossOrigin = "Anonymous"; // Needed for Color Thief
                    imgElement.onload = function() {
                        extractDominantColors(imgElement);
                    };
                    thumbnailContainer.appendChild(imgElement);
                } else {
                    const errorText = document.createElement('p');
                    errorText.textContent = `Invalid URL: ${url}`;
                    thumbnailContainer.appendChild(errorText);
                }
            });
        }

        function extractVideoId(url) {
            const regex = /(?:https?:\/\/)?(?:www\.)?youtu(?:be\.com\/watch\?v=|\.be\/)([\w\-]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        function extractDominantColors(imgElement) {
            const colorThief = new ColorThief();
            const dominantColors = colorThief.getPalette(imgElement, 2); // Get two dominant colors
            displayColorBar(dominantColors);
        }

        function displayColorBar(colors) {
            const bar = document.createElement('div');
            bar.className = 'color-bar';
            bar.style.background = `linear-gradient(to right, rgb(${colors[0][0]},${colors[0][1]},${colors[0][2]}), rgb(${colors[1][0]},${colors[1][1]},${colors[1][2]}))`;
            document.getElementById('colorBarsContainer').appendChild(bar);
        }
    </script>
</body>
</html>
